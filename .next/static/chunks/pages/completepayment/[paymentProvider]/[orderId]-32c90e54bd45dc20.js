(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{95158:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/completepayment/[paymentProvider]/[orderId]",function(){return r(36851)}])},27698:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(85893),a=r(67294);function o(e){var t=e.setError,r=e.msg,o=(0,a.useState)(!0),s=o[0],c=o[1];(0,a.useEffect)((function(){setTimeout((function(){c(!1)}),5e3)}));return(0,n.jsxs)("div",{className:"errorBox",style:{animation:"".concat(s?"fadeIn":"fadeOut"," 200ms ease-in-out")},onAnimationEnd:function(){s||t(!1)},children:[(0,n.jsxs)("span",{children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"white",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x-circle",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("path",{d:"M15 9L9 15"}),(0,n.jsx)("path",{d:"M9 9L15 15"})]}),"\xa0Error\xa0:"]}),(0,n.jsx)("p",{children:String(r)})]})}},36248:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(85893),a=r(23469),o=r.n(a);function s(e){return(0,n.jsx)("div",{className:o().loader,children:(0,n.jsx)("span",{className:o().span})})}},36851:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(47568),a=r(34051),o=r.n(a),s=r(85893),c=r(9669),i=r.n(c),u=r(36248),d=r(67294),p=r(27698),l=r(11163),f=r(13661),y=r.n(f),m=r(27837);function h(){var e=(0,l.useRouter)(),t=(0,d.useState)(!1),r=t[0],a=t[1],c=(0,d.useState)(!1),f=c[0],h=c[1],v=(0,d.useState)(!1),_=v[0],x=v[1],w=(0,d.useState)(!1),k=w[0],j=w[1];function g(e,t){return b.apply(this,arguments)}function b(){return b=(0,n.Z)(o().mark((function t(r,s){var c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,m.Z)("https://checkout.razorpay.com/v1/checkout.js");case 2:if(t.sent){t.next=6;break}return alert("Razorpay SDK failed to load. Are you online?"),t.abrupt("return");case 6:c={key:r.key,currency:r.currency,amount:String(r.amount),order_id:r.id,name:"Indicon 2022",description:"Thank you for registering",handler:function(){var t=(0,n.Z)(o().mark((function t(r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i().post("/api/pay/razorpay/verify?formId=".concat(e.query.formId,"&orderId=").concat(r.razorpay_order_id),r);case 3:e.push("/confirmation/".concat(r.razorpay_order_id)),t.next=11;break;case 6:t.prev=6,t.t0=t.catch(0),h(!0),j(void 0!==t.t0.response?t.t0.response.data.error:t.t0),a(!1);case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),prefill:{name:"".concat(s.name),email:s.email,contact:"USD"===r.amount.currency?"":"+91".concat(s.phone)}},(u=new window.Razorpay(c)).open(),u.on("payment.failed",function(){var t=(0,n.Z)(o().mark((function t(r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i().post("/api/pay/razorpay/failed?formId=".concat(e.query.formId),r.error);case 3:e.push("/confirmation/".concat(e.query.formId,"/").concat(r.error.metadata.order_id)),u.close(),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),h(!0),j(void 0!==t.t0.response?t.t0.response.data.error:t.t0),a(!1);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}());case 10:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}return(0,d.useEffect)((function(){function t(){return(t=(0,n.Z)(o().mark((function t(){var r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"razorpay"!==e.query.paymentProvider){t.next=6;break}return t.next=4,i().get("/api/pay/razorpay/orderDetails?orderId=".concat(e.query.orderId));case 4:"paid"!==(r=t.sent).data.status?g(r.data,r.data.userDetails):x(!0);case 6:if("paytm"!==e.query.paymentProvider){t.next=11;break}return t.next=9,i().get("/api/pay/paytm/reinitiate?orderId=".concat(e.query.orderId));case 9:n=t.sent,y()(n.data);case 11:t.next=18;break;case 13:t.prev=13,t.t0=t.catch(0),h(!0),j(void 0!==t.t0.response?t.t0.response.data.error:t.t0),a(!1);case 18:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}void 0!==e.query.orderId&&function(){t.apply(this,arguments)}()}),[e.query.orderId]),(0,s.jsxs)("div",{children:[f?(0,s.jsx)(p.Z,{setError:h,msg:k}):null,r?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(u.Z,{msg:"Don't refresh this page. Redirecting to payment processing service ..."})}):null,_?(0,s.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},children:(0,s.jsx)("p",{children:"Payment already made"})}):null]})}},13661:function(e){"use strict";function t(e){return function(e){return"object"===typeof e}(e)&&!function(e){return"[object Date]"===Object.prototype.toString.call(e)}(e)?JSON.stringify(e):e}e.exports=function(e){var r="";r="https://securegw-stage.paytm.in/order/process",console.log("development");var n=function(e){var r=e.action,n=e.params,a=document.createElement("form");return a.setAttribute("method","post"),a.setAttribute("action",r),Object.keys(n).forEach((function(e){var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",e),r.setAttribute("value",t(n[e])),a.appendChild(r)})),a}({action:r,params:e});document.body.appendChild(n),n.submit(),n.remove()}},27837:function(e,t){"use strict";t.Z=function(){return new Promise((function(e){var t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=function(){e(!0)},t.onerror=function(){e(!1)},document.body.appendChild(t)}))}},23469:function(e){e.exports={loader:"styles_loader__U57It","loader-5-1":"styles_loader-5-1__UPnjs","loader-5-2":"styles_loader-5-2__TF7p8","loader-5-3":"styles_loader-5-3__OIQYu",span:"styles_span__DF1VN","loader-5-4":"styles_loader-5-4__niyGH","loader-5-5":"styles_loader-5-5__oocD_"}},11163:function(e,t,r){e.exports=r(90387)}},function(e){e.O(0,[217,774,888,179],(function(){return t=95158,e(e.s=t);var t}));var t=e.O();_N_E=t}]);