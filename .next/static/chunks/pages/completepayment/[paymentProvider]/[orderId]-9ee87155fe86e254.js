(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{95158:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/completepayment/[paymentProvider]/[orderId]",function(){return t(36851)}])},27698:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var n=t(85893),a=t(67294);function o(e){var r=e.setError,t=e.msg,o=(0,a.useState)(!0),s=o[0],c=o[1];(0,a.useEffect)((function(){setTimeout((function(){c(!1)}),5e3)}));return(0,n.jsxs)("div",{className:"errorBox",style:{animation:"".concat(s?"fadeIn":"fadeOut"," 200ms ease-in-out")},onAnimationEnd:function(){s||r(!1)},children:[(0,n.jsxs)("span",{children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"white",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x-circle",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("path",{d:"M15 9L9 15"}),(0,n.jsx)("path",{d:"M9 9L15 15"})]}),"\xa0Error\xa0:"]}),(0,n.jsx)("p",{children:String(t)})]})}},36248:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(85893),a=t(23469),o=t.n(a);function s(e){return(0,n.jsx)("div",{className:o().loader,children:(0,n.jsx)("span",{className:o().span})})}},36851:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return h}});var n=t(47568),a=t(34051),o=t.n(a),s=t(85893),c=t(9669),i=t.n(c),u=t(36248),d=t(67294),p=t(27698),l=t(11163),f=t(13661),y=t.n(f),m=t(27837);function h(){var e=(0,l.useRouter)(),r=(0,d.useState)(!1),t=r[0],a=r[1],c=(0,d.useState)(!1),f=c[0],h=c[1],v=(0,d.useState)(!1),_=v[0],x=v[1],w=(0,d.useState)(!1),k=w[0],j=w[1];function b(e,r){return g.apply(this,arguments)}function g(){return g=(0,n.Z)(o().mark((function r(t,s){var c,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.Z)("https://checkout.razorpay.com/v1/checkout.js");case 2:if(r.sent){r.next=6;break}return alert("Razorpay SDK failed to load. Are you online?"),r.abrupt("return");case 6:c={key:t.key,currency:t.currency,amount:String(t.amount),order_id:t.id,name:"Indicon 2022",description:"Thank you for registering",handler:function(){var r=(0,n.Z)(o().mark((function r(t){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,i().post("/api/pay/razorpay/verify?formId=".concat(e.query.formId,"&orderId=").concat(t.razorpay_order_id),t);case 3:e.push("/confirmation/".concat(t.razorpay_order_id)),r.next=11;break;case 6:r.prev=6,r.t0=r.catch(0),h(!0),j(void 0!==r.t0.response?r.t0.response.data.error:r.t0),a(!1);case 11:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}(),prefill:{name:"".concat(s.name),email:s.email,contact:"USD"===t.amount.currency?"":"+91".concat(s.phone)}},(u=new window.Razorpay(c)).open(),u.on("payment.failed",function(){var r=(0,n.Z)(o().mark((function r(t){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,i().post("/api/pay/razorpay/failed?formId=".concat(e.query.formId),t.error);case 3:e.push("/confirmation/".concat(e.query.formId,"/").concat(t.error.metadata.order_id)),u.close(),r.next=12;break;case 7:r.prev=7,r.t0=r.catch(0),h(!0),j(void 0!==r.t0.response?r.t0.response.data.error:r.t0),a(!1);case 12:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}());case 10:case"end":return r.stop()}}),r)}))),g.apply(this,arguments)}return(0,d.useEffect)((function(){function r(){return(r=(0,n.Z)(o().mark((function r(){var t,n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,"razorpay"!==e.query.paymentProvider){r.next=6;break}return r.next=4,i().get("/api/pay/razorpay/orderDetails?orderId=".concat(e.query.orderId));case 4:"paid"!==(t=r.sent).data.status?b(t.data,t.data.userDetails):x(!0);case 6:if("paytm"!==e.query.paymentProvider){r.next=11;break}return r.next=9,i().get("/api/pay/paytm/reinitiate?orderId=".concat(e.query.orderId));case 9:n=r.sent,y()(n.data);case 11:r.next=18;break;case 13:r.prev=13,r.t0=r.catch(0),h(!0),j(void 0!==r.t0.response?r.t0.response.data.error:r.t0),a(!1);case 18:case"end":return r.stop()}}),r,null,[[0,13]])})))).apply(this,arguments)}void 0!==e.query.orderId&&function(){r.apply(this,arguments)}()}),[e.query.orderId]),(0,s.jsxs)("div",{children:[f?(0,s.jsx)(p.Z,{setError:h,msg:k}):null,t?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(u.Z,{msg:"Don't refresh this page. Redirecting to payment processing service ..."})}):null,_?(0,s.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},children:(0,s.jsx)("p",{children:"Payment already made"})}):null]})}},13661:function(e){"use strict";function r(e){return function(e){return"object"===typeof e}(e)&&!function(e){return"[object Date]"===Object.prototype.toString.call(e)}(e)?JSON.stringify(e):e}e.exports=function(e){var t="";t="https://securegw.paytm.in/order/process",console.log("production");var n=function(e){var t=e.action,n=e.params,a=document.createElement("form");return a.setAttribute("method","post"),a.setAttribute("action",t),Object.keys(n).forEach((function(e){var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name",e),t.setAttribute("value",r(n[e])),a.appendChild(t)})),a}({action:t,params:e});document.body.appendChild(n),n.submit(),n.remove()}},27837:function(e,r){"use strict";r.Z=function(){return new Promise((function(e){var r=document.createElement("script");r.src="https://checkout.razorpay.com/v1/checkout.js",r.onload=function(){e(!0)},r.onerror=function(){e(!1)},document.body.appendChild(r)}))}},23469:function(e){e.exports={loader:"styles_loader__U57It","loader-5-1":"styles_loader-5-1__UPnjs","loader-5-2":"styles_loader-5-2__TF7p8","loader-5-3":"styles_loader-5-3__OIQYu",span:"styles_span__DF1VN","loader-5-4":"styles_loader-5-4__niyGH","loader-5-5":"styles_loader-5-5__oocD_"}},11163:function(e,r,t){e.exports=t(90387)}},function(e){e.O(0,[217,774,888,179],(function(){return r=95158,e(e.s=r);var r}));var r=e.O();_N_E=r}]);